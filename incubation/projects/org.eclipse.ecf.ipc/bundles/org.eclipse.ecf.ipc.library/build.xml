<?xml version="1.0"?><!--    Copyright (c) 2009  Clark N. Hobbie    All rights reserved. This program and the accompanying materials    are made available under the terms of the Eclipse Public License v1.0    which accompanies this distribution, and is available at    http://www.eclipse.org/legal/epl-v10.html       Contributors:        Clark N. Hobbie - initial API and implementation --><project name="ipc" default="build" basedir=".">    <property file="build.properties"/>		<property name="MINGW" value="c:\MinGW"/>	    <target name="header">		<exec os="Windows XP" executable="javah">		    <arg value="-classpath"/>		    <arg value="..\clipc-java\bin"/>			<arg value="-d"/>			<arg value="src/windows"/>		    <arg value="org.eclipse.ecf.ipc.semaphore.SemaphoreNative"/>		    <arg value="org.eclipse.ecf.ipc.semaphore.SemaphoreResult"/>		    <arg value="org.eclipse.ecf.ipc.semaphore.SemaphoreResult$Results"/>			  <arg value="org.eclipse.ecf.ipc.namedpipe.NamedPipeImpl"/>			  <arg value="org.eclipse.ecf.ipc.namedpipe.NamedPipeResult"/>			  <arg value="org.eclipse.ecf.ipc.IPCPackage"/>		</exec>    	    	<exec os="Linux" executable="javah">    		<arg value="-classpath"/>    		<arg value="../clipc-java/bin"/>    		<arg value="-d"/>    		<arg value="src/linux"/>		    <arg value="org.eclipse.ecf.ipc.semaphore.SemaphoreNative"/>		    <arg value="org.eclipse.ecf.ipc.semaphore.SemaphoreResult"/>    		<arg value="org.eclipse.ecf.ipc.fifo.FIFOImpl"/>    		<arg value="org.eclipse.ecf.ipc.fifo.FIFOResult"/>			  <arg value="org.eclipse.ecf.ipc.IPCPackage"/>    		    	</exec>    </target>		<target name="ipc_pkg_headers">		<exec os="Windows XP" executable="javah">		  <arg value="-classpath"/>		  <arg value="..\clipc-java\bin"/>			<arg value="-d"/>			<arg value="src/windows"/>			<arg value="org.eclipse.ecf.ipc.namedpipe.NamedPipeImpl"/>		</exec>	</target>		<target name="clean">		<delete dir="bin"/>		<delete dir="lib"/>		<delete dir="doc"/>		<delete dir="Debug"/>	</target>		<target name="native-windows" if="os-windows">		<exec executable="${MINGW}\bin\gcc" dir="src/windows">			<env key="PATH" path="${env.PATH};${MINGW}\bin"/>		    <arg value="-Wall"/>		    <arg value="-D_JNI_IMPLEMENTATION_"/>		    <arg value="-Wl,--kill-at"/>		    <arg value="-I${env.JAVA_HOME}/include"/>		    <arg value="-I${env.JAVA_HOME}/include/win32"/>		    <arg value="-shared"/>		    <arg value="*.c"/>		    <arg line="-o ecf-ipc_010.dll"/>		</exec>				<mkdir dir="lib"/>    			<copy todir="lib">		    <fileset dir="src/windows">				<include name="*.dll"/>		    </fileset>		</copy>	</target>		<target name="native-linux" if="os-linux">		<mkdir dir="lib"/>		<exec executable="gcc" dir="src/linux">		  <arg value="-Wall"/>		  <arg value="-D_JNI_IMPLEMENTATION_"/>		  <arg value="-I${env.JAVA_HOME}/include"/>		  <arg value="-I${env.JAVA_HOME}/include/linux"/>		  <arg value="-shared"/>			<arg value="IPCPackage.c"/>			<arg value="FIFOImpl.c"/>			<arg value="FIFOResult.c"/>			<arg value="SemaphoreNative.c"/>			<arg value="SemaphoreResult.c"/>			<arg value="util.c"/>		    <arg line="-o libclipc.so"/>		</exec>    			<move todir="lib" file="src/linux/libclipc.so"/>	</target>		<target name="determine-os">		<condition property="os-windows">			<os family="windows"/>		</condition>				<condition property="os-linux">			<os family="unix" name="Linux"/>		</condition>	</target>			<target name="build" depends="echo-os, determine-os, native-windows, native-linux">	</target>		<target name="lib" depends="build"/>		<target name="echo-os">		<echo>env.JAVA_HOME ${env.JAVA_HOME} os.name       ${os.name}os.family     ${os.arch}os.version    ${os.version}		</echo>	</target>		<target name="source" depends="clean">		<delete file="source.zip"/>		<zip basedir="." file="source.zip">			<exclude name="**/*~"/>			<exclude name="**/*.dll"/>			<exclude name="**/*.swp"/>		</zip>	</target>	</project>